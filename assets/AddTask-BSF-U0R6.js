import{r as n,u as _,j as e}from"./vendor-CAPrwHoW.js";import{U,n as i,o as l,I as M,a1 as G,p as H,a2 as f,C as S,i as L,q as X,g as D,t as K,a3 as O,h as E,j as z}from"./settings-BshogTHf.js";import{u as d}from"./tasks-u5ZNZD5t.js";import{C as J}from"./InputThemeProvider-DrStsf2h.js";import{u as Q,aT as V,f as W,g as Y,ba as Z,bv as ee}from"./ui-lib-lpr_KMSR.js";import"./emoji-DdLBlTIZ.js";import"./ntc-LB1IgDFN.js";const le=()=>{const{user:T,setUser:b}=n.useContext(U),h=Q(),[t,A]=d("","name","sessionStorage"),[u,y]=d(null,"emoji","sessionStorage"),[x,N]=d(h.primary,"color","sessionStorage"),[o,w]=d("","description","sessionStorage"),[a,k]=d("","deadline","sessionStorage"),[c,p]=n.useState(""),[m,g]=n.useState(""),[j,I]=d([],"categories","sessionStorage"),[$,v]=n.useState(!1),q=_();n.useEffect(()=>{document.title="Todo App - Add Task"},[]),n.useEffect(()=>{t.length>i?p(`Name should be less than or equal to ${i} characters`):p(""),o.length>l?g(`Description should be less than or equal to ${l} characters`):g("")},[o.length,t.length]);const P=s=>{const r=s.target.value;A(r),r.length>i?p(`Name should be less than or equal to ${i} characters`):p("")},R=s=>{const r=s.target.value;w(r),r.length>l?g(`Description should be less than or equal to ${l} characters`):g("")},B=s=>{k(s.target.value)},F=()=>{if(t===""){E("Task name is required.",{type:"error"});return}if(c!==""||m!=="")return;const s={id:z(),done:!1,pinned:!1,name:t,description:o!==""?o:void 0,emoji:u||void 0,color:x,date:new Date,deadline:a!==""?new Date(a):void 0,category:j||[]};b(C=>({...C,tasks:[...C.tasks,s]})),q("/"),E(e.jsxs("div",{children:["Added task - ",e.jsx("b",{children:s.name})]}),{icon:e.jsx(ee,{})}),["name","color","description","emoji","deadline","categories"].map(C=>sessionStorage.removeItem(C))};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Add New Task"}),e.jsxs(G,{children:[e.jsx(H,{emoji:typeof u=="string"?u:void 0,setEmoji:y,color:x,name:t,type:"task"}),e.jsxs(J,{children:[e.jsx(f,{label:"Task Name",name:"name",placeholder:"Enter task name",autoComplete:"off",value:t,onChange:P,required:!0,error:c!=="",helpercolor:c&&S.red,helperText:t===""?void 0:c||`${t.length}/${i}`}),e.jsx(f,{label:"Task Description",name:"name",placeholder:"Enter task description",autoComplete:"off",value:o,onChange:R,multiline:!0,rows:4,error:m!=="",helpercolor:m&&S.red,helperText:o===""?void 0:m||`${o.length}/${l}`}),e.jsx(f,{label:"Task Deadline",name:"name",placeholder:"Enter deadline date",type:"datetime-local",value:a,onChange:B,onFocus:()=>v(!0),onBlur:()=>v(!1),hidetext:(!a||a==="")&&!$,sx:{colorScheme:L(h.secondary)?"dark":"light"},slotProps:{input:{startAdornment:a&&a!==""?e.jsx(V,{position:"start",children:e.jsx(W,{title:"Clear",children:e.jsx(Y,{color:"error",onClick:()=>k(""),children:e.jsx(Z,{})})})}):void 0}}}),T.settings.enableCategories!==void 0&&T.settings.enableCategories&&e.jsxs("div",{style:{marginBottom:"14px"},children:[e.jsx("br",{}),e.jsx(X,{selectedCategories:j,onCategoryChange:s=>I(s),width:"400px",fontColor:D(h.secondary)})]})]}),e.jsx(K,{color:x,width:"400px",onColorChange:s=>{N(s)},fontColor:D(h.secondary)}),e.jsx(O,{onClick:F,disabled:t.length>i||o.length>l,children:"Create Task"})]})]})};export{le as default};
