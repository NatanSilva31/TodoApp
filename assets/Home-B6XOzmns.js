const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/tasks-xd8frde8.js","assets/vendor-B-2yl_ca.js","assets/vendor-DpTtVfbh.css","assets/emoji-D7qZVVSC.js","assets/ui-lib-C41lPcrf.js","assets/settings-JzgbR0SS.js","assets/ntc-LB1IgDFN.js"])))=>i.map(i=>d[i]);
import{_}from"./index-qRiAwhki.js";import{r as t,j as e,u as z}from"./vendor-B-2yl_ca.js";import{u as R,U as M,M as A,N,O as $,Q as L,R as F,V as Y,W as B,X as W,Y as K,Z as V,_ as U,$ as q,a0 as I}from"./settings-JzgbR0SS.js";import{a as E}from"./emoji-D7qZVVSC.js";import{u as D,H as Q,a as X}from"./tasks-xd8frde8.js";import{n as Z,by as J,a as G,a7 as ee,bz as te,C as se,f as ne,i as ae}from"./ui-lib-C41lPcrf.js";import"./ntc-LB1IgDFN.js";const oe=({children:r})=>{const[s,y]=t.useState(null),[g,h]=t.useState(null),[T,x]=t.useState(null),[p,a]=t.useState(new Set),[f,l]=D([],"selectedTasks","sessionStorage"),[n,o]=D("","search","sessionStorage"),[i,c]=t.useState(!1),[k,u]=t.useState(!1),S=R(),C=t.useCallback(d=>{a(j=>{const m=new Set(j);return m.has(d)?m.delete(d):m.add(d),m})},[]),w=t.useCallback(d=>{h(null),l(j=>j.includes(d)?j.filter(m=>m!==d):[...j,d])},[l]),b=t.useCallback(d=>n?d.split(new RegExp(`(${n})`,"gi")).map((m,O)=>m.toLowerCase()===n.toLowerCase()?e.jsx(Q,{children:m},O):m):d,[n]),P=t.useCallback(()=>{s&&u(!0)},[s]),v=t.useCallback(()=>{h(null),document.body.style.overflow="visible",s&&!S&&p.has(s)&&C(s)},[s,S,p,C]),H=t.useMemo(()=>({selectedTaskId:s,setSelectedTaskId:y,anchorEl:g,setAnchorEl:h,anchorPosition:T,setAnchorPosition:x,expandedTasks:p,setExpandedTasks:a,toggleShowMore:C,search:n,setSearch:o,highlightMatchingText:b,multipleSelectedTasks:f,setMultipleSelectedTasks:l,handleSelectTask:w,editModalOpen:i,setEditModalOpen:c,handleDeleteTask:P,deleteDialogOpen:k,setDeleteDialogOpen:u,handleCloseMoreMenu:v}),[s,g,T,p,C,n,o,b,f,l,w,i,P,k,v]);return e.jsx(X.Provider,{value:H,children:r})},re=t.memo(()=>{const[r,s]=t.useState(""),[y,g]=t.useState(0),{user:h}=t.useContext(M),{emojisStyle:T}=h,x=t.useRef(null),p=t.useRef(0),a=t.useRef([]),f=t.useCallback(l=>{const n=/\*\*(.*?)\*\*/g;return l.split(n).map((i,c)=>{if(c%2===1){const k=i.trim();return e.jsx(E,{size:20,unified:k,emojiStyle:T},c)}else return i})},[T]);return t.useEffect(()=>{const l=A();s(l),a.current=f(l);const n=6e3,o=i=>{if(i-p.current>=n){p.current=i;const c=A();s(c),a.current=f(c),g(k=>k+1)}x.current=requestAnimationFrame(o)};return x.current=requestAnimationFrame(o),()=>{x.current&&cancelAnimationFrame(x.current)}},[f]),e.jsx(le,{className:"animated-greeting",children:typeof r=="string"?f(r):r},y)}),le=Z.div`
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 16px;
  margin-top: 4px;
  margin-left: 8px;
  font-style: italic;
  will-change: transform, opacity;
  animation: ${N} 0.5s ease-in-out;
`,ie=t.lazy(()=>_(()=>import("./tasks-xd8frde8.js").then(r=>r.c),__vite__mapDeps([0,1,2,3,4,5,6])).then(r=>({default:r.TasksList}))),he=()=>{const{user:r}=t.useContext(M),{tasks:s,emojisStyle:y,settings:g,name:h}=r,T=$(),x=z(),p=R(),a=t.useMemo(()=>{const n=s.filter(u=>u.done).length,o=s.length>0?n/s.length*100:0,i=new Date().setHours(0,0,0,0),c=s.filter(u=>u.deadline?new Date(u.deadline).setHours(0,0,0,0)===i&&!u.done:!1),k=c.map(u=>u.name);return{completedTasksCount:n,completedTaskPercentage:o,tasksWithDeadlineTodayCount:c.length,tasksDueTodayNames:k}},[s]),f=t.useMemo(()=>{const o=new Date().getHours();return console.log("Hora local:",o),o>=5&&o<12?"Bom dia":o>=12&&o<18?"Boa tarde":"Boa noite"},[]),l=t.useMemo(()=>{const n=a.completedTaskPercentage;switch(!0){case n===0:return"No tasks completed yet. Keep going!";case n===100:return"Congratulations! All tasks completed!";case n>=75:return"Almost there!";case n>=50:return"You're halfway there! Keep it up!";case n>=25:return"You're making good progress.";default:return"You're just getting started."}},[a.completedTaskPercentage]);return t.useEffect(()=>{document.title="Todo App"},[]),e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsx(E,{unified:"1f44b",emojiStyle:y}),"   ",f,h&&e.jsxs("span",{translate:"no",children:[", ",e.jsx("span",{children:h})]})]}),e.jsx(re,{}),!T&&e.jsxs(F,{children:[e.jsx(J,{})," You're offline but you can use the app!"]}),s.length>0&&e.jsx(Y,{children:e.jsxs(B,{glow:g.enableGlow,children:[e.jsxs(G,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(W,{variant:"determinate",value:a.completedTaskPercentage,size:64,thickness:5,"aria-label":"Progress",glow:g.enableGlow}),e.jsx(K,{glow:g.enableGlow&&a.completedTaskPercentage>0,children:e.jsx(ee,{variant:"caption",component:"div",color:"white",sx:{fontSize:"16px",fontWeight:600},children:`${Math.round(a.completedTaskPercentage)}%`})})]}),e.jsxs(V,{children:[e.jsx(U,{children:a.completedTasksCount===0?`Você tem ${s.length} tarefa${s.length>1?"s":""} para concluir.`:`You've completed ${a.completedTasksCount} out of ${s.length} tasks.`}),e.jsx(q,{children:l}),a.tasksWithDeadlineTodayCount>0&&e.jsxs("span",{style:{opacity:.8,display:"inline-block"},children:[e.jsx(te,{sx:{fontSize:"20px",verticalAlign:"middle"}})," Tasks due today: ",e.jsx("span",{translate:"no",children:new Intl.ListFormat("en",{style:"long"}).format(a.tasksDueTodayNames)})]})]})]})}),e.jsx(t.Suspense,{fallback:e.jsx(G,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(se,{})}),children:e.jsx(oe,{children:e.jsx(ie,{})})}),!p&&e.jsx(ne,{title:s.length>0?"Add New Task":"Add Task",placement:"left",children:e.jsx(I,{animate:s.length===0,glow:g.enableGlow,onClick:()=>x("add"),"aria-label":"Add Task",children:e.jsx(ae,{style:{fontSize:"44px"}})})})]})};export{he as default};
