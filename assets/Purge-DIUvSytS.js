import{r as c,j as e}from"./vendor-B-2yl_ca.js";import{u as S}from"./tasks-D_NJAJ7R.js";import{U as A,I as w,ab as E,ad as v,af as B,ag as u,b as F,D as k,h as g,ae as M}from"./settings-Bf_VNhSA.js";import{a as R}from"./emoji-D7qZVVSC.js";import{f as z,bF as U,bG as L,l as h,x as N,z as G,E as H,D as I,aP as W,a7 as Y}from"./ui-lib-C41lPcrf.js";import"./ntc-LB1IgDFN.js";const V=()=>{const{user:r,setUser:f}=c.useContext(A),{tasks:a}=r,[o,x]=S([],"tasksToPurge","sessionStorage"),[T,l]=c.useState(!1);c.useEffect(()=>{document.title="Todo App - Purge tasks"},[]);const i=a.filter(s=>s.done),j=a.filter(s=>!s.done),m=new Intl.ListFormat("en",{style:"long",type:"conjunction"}).format(o.map(s=>{const t=r.tasks.find(n=>n.id===s);return t?t.name:""})),C=s=>{x(t=>t.includes(s)?t.filter(n=>n!==s):[...t,s])},d=s=>{const t=r.tasks.filter(n=>!s.some(b=>b===n));x([]),f(n=>({...n,tasks:t}))},D=()=>{const s=a.filter(t=>o.includes(t.id));d(s),g(e.jsxs("div",{children:["Purged selectedTasks tasks: ",e.jsx("b",{translate:"no",children:m})]}))},P=()=>{d(i),g("Purged all done tasks.")},y=()=>{l(!0)},p=(s,t)=>e.jsxs(e.Fragment,{children:[e.jsx(I,{sx:{fontWeight:500,my:"4px"},children:t}),s.map(n=>e.jsxs(M,{backgroundClr:n.color,onClick:()=>C(n.id),selected:o.includes(n.id),translate:"no",children:[e.jsx(W,{size:"medium",checked:o.includes(n.id)}),e.jsxs(Y,{variant:"body1",component:"span",sx:{display:"flex",alignItems:"center",gap:"6px",wordBreak:"break-word"},children:[e.jsx(R,{size:24,unified:n.emoji||"",emojiStyle:r.emojisStyle})," ",n.name]})]},n.id))]});return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Purge Tasks"}),e.jsx(E,{children:"Select Tasks To Purge"}),e.jsxs(v,{children:[i.length>0&&p(i,"Done Tasks"),j.length>0&&p(j,"Not Done Tasks"),a.length===0&&e.jsx("h3",{style:{opacity:.8,fontStyle:"italic"},children:"You don't have any tasks to purge"})]}),e.jsxs(B,{children:[e.jsx(z,{title:o.length>0?e.jsxs("div",{children:[e.jsx("span",{children:"Selected Tasks: "}),e.jsx("span",{translate:"no",children:m})]}):void 0,children:e.jsxs(u,{onClick:D,disabled:o.length===0,children:[e.jsx(U,{}),"   Purge Selected"," ",o.length>0&&`[${o.length}]`]})}),e.jsxs(u,{onClick:P,disabled:i.length===0,children:[e.jsx(L,{}),"   Purge Done"]}),e.jsxs(u,{color:"error",onClick:y,disabled:a.length===0,children:[e.jsx(h,{}),"   Purge All Tasks"]})]}),e.jsxs(N,{open:T,onClose:()=>l(!1),children:[e.jsx(F,{title:"Purge All Tasks",subTitle:"Confirm that you want to purge all tasks",onClose:()=>l(!1),icon:e.jsx(h,{})}),e.jsx(G,{children:"This action cannot be undone. Are you sure you want to proceed?"}),e.jsxs(H,{children:[e.jsx(k,{onClick:()=>l(!1),children:"Cancel"}),e.jsxs(k,{color:"error",onClick:()=>{d(a),l(!1),g("Purged all tasks")},children:[e.jsx(h,{}),"   Purge"]})]})]})]})};export{V as default};
