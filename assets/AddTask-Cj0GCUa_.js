import{r as n,u as _,j as e}from"./vendor-B-2yl_ca.js";import{U,n as i,o as l,I as M,a1 as z,p as G,a2 as j,C as S,i as H,q as L,g as D,t as X,a3 as K,h as b,j as O}from"./settings-B-kzCqCX.js";import{u as d}from"./tasks-B5baZqj2.js";import{C as J}from"./InputThemeProvider-CqlmPH6W.js";import{u as Q,aT as V,f as W,g as Y,ba as Z,bv as ee}from"./ui-lib-C41lPcrf.js";import"./emoji-D7qZVVSC.js";import"./ntc-LB1IgDFN.js";const le=()=>{const{user:T,setUser:A}=n.useContext(U),h=Q(),[s,E]=d("","name","sessionStorage"),[u,y]=d(null,"emoji","sessionStorage"),[f,I]=d(h.primary,"color","sessionStorage"),[t,N]=d("","description","sessionStorage"),[a,v]=d("","deadline","sessionStorage"),[c,p]=n.useState(""),[m,g]=n.useState(""),[x,w]=d([],"categories","sessionStorage"),[$,k]=n.useState(!1),q=_();n.useEffect(()=>{document.title="Todo App - Add Task"},[]),n.useEffect(()=>{s.length>i?p(`Name should be less than or equal to ${i} characters`):p(""),t.length>l?g(`Description should be less than or equal to ${l} characters`):g("")},[t.length,s.length]);const P=o=>{const r=o.target.value;E(r),r.length>i?p(`Name should be less than or equal to ${i} characters`):p("")},R=o=>{const r=o.target.value;N(r),r.length>l?g(`Description should be less than or equal to ${l} characters`):g("")},B=o=>{v(o.target.value)},F=()=>{if(s===""){b("Task name is required.",{type:"error"});return}if(c!==""||m!=="")return;const o={id:O(),done:!1,pinned:!1,name:s,description:t!==""?t:void 0,emoji:u||void 0,color:f,date:new Date,deadline:a!==""?new Date(a):void 0,category:x||[]};A(C=>({...C,tasks:[...C.tasks,o]})),q("/"),b(e.jsxs("div",{children:["Added task - ",e.jsx("b",{children:o.name})]}),{icon:e.jsx(ee,{})}),["name","color","description","emoji","deadline","categories"].map(C=>sessionStorage.removeItem(C))};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Adicionar nova tarefa"}),e.jsxs(z,{children:[e.jsx(G,{emoji:typeof u=="string"?u:void 0,setEmoji:y,color:f,name:s,type:"task"}),e.jsxs(J,{children:[e.jsx(j,{label:"Nome da tarefa",name:"name",placeholder:"Insira o nome da tarefa",autoComplete:"off",value:s,onChange:P,required:!0,error:c!=="",helpercolor:c&&S.red,helperText:s===""?void 0:c||`${s.length}/${i}`}),e.jsx(j,{label:"Descrição da tarefa",name:"name",placeholder:"Insira a descrição da tarefa",autoComplete:"off",value:t,onChange:R,multiline:!0,rows:4,error:m!=="",helpercolor:m&&S.red,helperText:t===""?void 0:m||`${t.length}/${l}`}),e.jsx(j,{label:"Prazo da tarefa",name:"name",placeholder:"Insira o prazo da tarefa",type:"datetime-local",value:a,onChange:B,onFocus:()=>k(!0),onBlur:()=>k(!1),hidetext:(!a||a==="")&&!$,sx:{colorScheme:H(h.secondary)?"dark":"light"},slotProps:{input:{startAdornment:a&&a!==""?e.jsx(V,{position:"start",children:e.jsx(W,{title:"Clear",children:e.jsx(Y,{color:"error",onClick:()=>v(""),children:e.jsx(Z,{})})})}):void 0}}}),T.settings.enableCategories!==void 0&&T.settings.enableCategories&&e.jsxs("div",{style:{marginBottom:"14px"},children:[e.jsx("br",{}),e.jsx(L,{selectedCategories:x,onCategoryChange:o=>w(o),width:"400px",fontColor:D(h.secondary)})]})]}),e.jsx(X,{color:f,width:"400px",onColorChange:o=>{I(o)},fontColor:D(h.secondary)}),e.jsx(K,{onClick:F,disabled:s.length>i||t.length>l,children:"Create Task"})]})]})};export{le as default};
