import{r as n,u as O,j as e}from"./vendor-B-2yl_ca.js";import{U,n as i,o as l,J as M,a2 as q,p as z,a3 as j,C as A,i as G,q as H,g as k,t as L,a4 as X,h as D,j as J}from"./settings-DBpCKlDj.js";import{u as d}from"./tasks-ptIpyrWe.js";import{C as K}from"./InputThemeProvider-MAzkbWQ5.js";import{u as Q,aT as V,f as W,g as Y,ba as Z,bv as ee}from"./ui-lib-C41lPcrf.js";import"./emoji-D7qZVVSC.js";import"./ntc-LB1IgDFN.js";const le=()=>{const{user:v,setUser:E}=n.useContext(U),g=Q(),[a,y]=d("","name","sessionStorage"),[u,b]=d(null,"emoji","sessionStorage"),[C,I]=d(g.primary,"color","sessionStorage"),[t,N]=d("","description","sessionStorage"),[s,T]=d("","deadline","sessionStorage"),[c,h]=n.useState(""),[m,p]=n.useState(""),[x,w]=d([],"categories","sessionStorage"),[$,S]=n.useState(!1),P=O();n.useEffect(()=>{document.title="Todo App - Adicionar tarefa"},[]),n.useEffect(()=>{a.length>i?h(`O nome deve ser menor ou igual a ${i} caracteres`):h(""),t.length>l?p(`A descrição deve ser menor ou igual a ${l} caracteres`):p("")},[t.length,a.length]);const R=o=>{const r=o.target.value;y(r),r.length>i?h(`O nome deve ser menor ou igual a ${i} caracteres`):h("")},B=o=>{const r=o.target.value;N(r),r.length>l?p(`A descrição deve ser menor ou igual a ${l} caracteres`):p("")},F=o=>{T(o.target.value)},_=()=>{if(a===""){D("O nome da tarefa é obrigatório.",{type:"error"});return}if(c!==""||m!=="")return;const o={id:J(),done:!1,pinned:!1,name:a,description:t!==""?t:void 0,emoji:u||void 0,color:C,date:new Date,deadline:s!==""?new Date(s):void 0,category:x||[]};E(f=>({...f,tasks:[...f.tasks,o]})),P("/"),D(e.jsxs("div",{children:["Tarefa adicionada - ",e.jsx("b",{children:o.name})]}),{icon:e.jsx(ee,{})}),["name","color","description","emoji","deadline","categories"].map(f=>sessionStorage.removeItem(f))};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Adicionar nova tarefa"}),e.jsxs(q,{children:[e.jsx(z,{emoji:typeof u=="string"?u:void 0,setEmoji:b,color:C,name:a,type:"task"}),e.jsxs(K,{children:[e.jsx(j,{label:"Nome da tarefa",name:"name",placeholder:"Insira o nome da tarefa",autoComplete:"off",value:a,onChange:R,required:!0,error:c!=="",helpercolor:c&&A.red,helperText:a===""?void 0:c||`${a.length}/${i}`}),e.jsx(j,{label:"Descrição da tarefa",name:"name",placeholder:"Insira a descrição da tarefa",autoComplete:"off",value:t,onChange:B,multiline:!0,rows:4,error:m!=="",helpercolor:m&&A.red,helperText:t===""?void 0:m||`${t.length}/${l}`}),e.jsx(j,{label:"Prazo da tarefa",name:"name",placeholder:"Insira o prazo da tarefa",type:"datetime-local",value:s,onChange:F,onFocus:()=>S(!0),onBlur:()=>S(!1),hidetext:(!s||s==="")&&!$,sx:{colorScheme:G(g.secondary)?"dark":"light"},slotProps:{input:{startAdornment:s&&s!==""?e.jsx(V,{position:"start",children:e.jsx(W,{title:"Clear",children:e.jsx(Y,{color:"error",onClick:()=>T(""),children:e.jsx(Z,{})})})}):void 0}}}),v.settings.enableCategories!==void 0&&v.settings.enableCategories&&e.jsxs("div",{style:{marginBottom:"14px"},children:[e.jsx("br",{}),e.jsx(H,{selectedCategories:x,onCategoryChange:o=>w(o),width:"400px",fontColor:k(g.secondary)})]})]}),e.jsx(L,{color:C,width:"400px",onColorChange:o=>{I(o)},fontColor:k(g.secondary)}),e.jsx(X,{onClick:_,disabled:a.length>i||t.length>l,children:"Criar tarefa"})]})]})};export{le as default};
