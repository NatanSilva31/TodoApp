const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/tasks-Bc7UcxXI.js","assets/vendor-B-2yl_ca.js","assets/vendor-DpTtVfbh.css","assets/emoji-D7qZVVSC.js","assets/ui-lib-C41lPcrf.js","assets/settings-C_-OD5GG.js","assets/ntc-LB1IgDFN.js"])))=>i.map(i=>d[i]);
import{_ as z}from"./index-DtThyie3.js";import{r as t,j as e,u as V}from"./vendor-B-2yl_ca.js";import{u as M,U as A,M as D,N as _,O as N,Q as $,R as L,V as F,W as B,X as W,Y as U,Z as q,_ as I,$ as K,a0 as Q}from"./settings-C_-OD5GG.js";import{a as E}from"./emoji-D7qZVVSC.js";import{u as G,H as X,a as Y}from"./tasks-Bc7UcxXI.js";import{n as Z,by as J,a as R,a7 as ee,bz as te,C as se,f as ne,i as ae}from"./ui-lib-C41lPcrf.js";import"./ntc-LB1IgDFN.js";const oe=({children:r})=>{const[s,y]=t.useState(null),[p,h]=t.useState(null),[k,x]=t.useState(null),[g,a]=t.useState(new Set),[f,l]=G([],"selectedTasks","sessionStorage"),[n,o]=G("","search","sessionStorage"),[i,c]=t.useState(!1),[T,d]=t.useState(!1),S=M(),C=t.useCallback(u=>{a(j=>{const m=new Set(j);return m.has(u)?m.delete(u):m.add(u),m})},[]),w=t.useCallback(u=>{h(null),l(j=>j.includes(u)?j.filter(m=>m!==u):[...j,u])},[l]),b=t.useCallback(u=>n?u.split(new RegExp(`(${n})`,"gi")).map((m,O)=>m.toLowerCase()===n.toLowerCase()?e.jsx(X,{children:m},O):m):u,[n]),P=t.useCallback(()=>{s&&d(!0)},[s]),v=t.useCallback(()=>{h(null),document.body.style.overflow="visible",s&&!S&&g.has(s)&&C(s)},[s,S,g,C]),H=t.useMemo(()=>({selectedTaskId:s,setSelectedTaskId:y,anchorEl:p,setAnchorEl:h,anchorPosition:k,setAnchorPosition:x,expandedTasks:g,setExpandedTasks:a,toggleShowMore:C,search:n,setSearch:o,highlightMatchingText:b,multipleSelectedTasks:f,setMultipleSelectedTasks:l,handleSelectTask:w,editModalOpen:i,setEditModalOpen:c,handleDeleteTask:P,deleteDialogOpen:T,setDeleteDialogOpen:d,handleCloseMoreMenu:v}),[s,p,k,g,C,n,o,b,f,l,w,i,P,T,v]);return e.jsx(Y.Provider,{value:H,children:r})},re=t.memo(()=>{const[r,s]=t.useState(""),[y,p]=t.useState(0),{user:h}=t.useContext(A),{emojisStyle:k}=h,x=t.useRef(null),g=t.useRef(0),a=t.useRef([]),f=t.useCallback(l=>{const n=/\*\*(.*?)\*\*/g;return l.split(n).map((i,c)=>{if(c%2===1){const T=i.trim();return e.jsx(E,{size:20,unified:T,emojiStyle:k},c)}else return i})},[k]);return t.useEffect(()=>{const l=D();s(l),a.current=f(l);const n=6e3,o=i=>{if(i-g.current>=n){g.current=i;const c=D();s(c),a.current=f(c),p(T=>T+1)}x.current=requestAnimationFrame(o)};return x.current=requestAnimationFrame(o),()=>{x.current&&cancelAnimationFrame(x.current)}},[f]),e.jsx(le,{className:"animated-greeting",children:typeof r=="string"?f(r):r},y)}),le=Z.div`
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 16px;
  margin-top: 4px;
  margin-left: 8px;
  font-style: italic;
  will-change: transform, opacity;
  animation: ${_} 0.5s ease-in-out;
`,ie=t.lazy(()=>z(()=>import("./tasks-Bc7UcxXI.js").then(r=>r.c),__vite__mapDeps([0,1,2,3,4,5,6])).then(r=>({default:r.TasksList}))),he=()=>{const{user:r}=t.useContext(A),{tasks:s,emojisStyle:y,settings:p,name:h}=r,k=N(),x=V(),g=M(),a=t.useMemo(()=>{const n=s.filter(d=>d.done).length,o=s.length>0?n/s.length*100:0,i=new Date().setHours(0,0,0,0),c=s.filter(d=>d.deadline?new Date(d.deadline).setHours(0,0,0,0)===i&&!d.done:!1),T=c.map(d=>d.name);return{completedTasksCount:n,completedTaskPercentage:o,tasksWithDeadlineTodayCount:c.length,tasksDueTodayNames:T}},[s]),f=t.useMemo(()=>{const o=new Date().getHours();return console.log("Hora local:",o),o>=5&&o<12?"Bom dia":o>=12&&o<18?"Boa tarde":"Boa noite"},[]),l=t.useMemo(()=>{const n=a.completedTaskPercentage;switch(!0){case n===0:return"Nenhuma tarefa concluída ainda. Continue!";case n===100:return"Parabéns! Todas as tarefas concluídas!";case n>=75:return"Quase lá!";case n>=50:return"Você está no meio do caminho! Continue assim!";case n>=25:return"Você está fazendo um bom progresso.";default:return"Você está apenas começando."}},[a.completedTaskPercentage]);return t.useEffect(()=>{document.title="Todo App"},[]),e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsx(E,{unified:"1f44b",emojiStyle:y}),"   ",f,h&&e.jsxs("span",{translate:"no",children:[", ",e.jsx("span",{children:h})]})]}),e.jsx(re,{}),!k&&e.jsxs(L,{children:[e.jsx(J,{})," Você está offline, mas pode usar o aplicativo!"]}),s.length>0&&e.jsx(F,{children:e.jsxs(B,{glow:p.enableGlow,children:[e.jsxs(R,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(W,{variant:"determinate",value:a.completedTaskPercentage,size:64,thickness:5,"aria-label":"Progress",glow:p.enableGlow}),e.jsx(U,{glow:p.enableGlow&&a.completedTaskPercentage>0,children:e.jsx(ee,{variant:"caption",component:"div",color:"white",sx:{fontSize:"16px",fontWeight:600},children:`${Math.round(a.completedTaskPercentage)}%`})})]}),e.jsxs(q,{children:[e.jsx(I,{children:a.completedTasksCount===0?`Você tem ${s.length} tarefa${s.length>1?"s":""} para concluir.`:`Você concluiu ${a.completedTasksCount} de ${s.length} tarefas.`}),e.jsx(K,{children:l}),a.tasksWithDeadlineTodayCount>0&&e.jsxs("span",{style:{opacity:.8,display:"inline-block"},children:[e.jsx(te,{sx:{fontSize:"20px",verticalAlign:"middle"}})," Tasks due today: ",e.jsx("span",{translate:"no",children:new Intl.ListFormat("en",{style:"long"}).format(a.tasksDueTodayNames)})]})]})]})}),e.jsx(t.Suspense,{fallback:e.jsx(R,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(se,{})}),children:e.jsx(oe,{children:e.jsx(ie,{})})}),!g&&e.jsx(ne,{title:s.length>0?"Add New Task":"Add Task",placement:"left",children:e.jsx(Q,{animate:s.length===0,glow:p.enableGlow,onClick:()=>x("add"),"aria-label":"Add Task",children:e.jsx(ae,{style:{fontSize:"44px"}})})})]})};export{he as default};
