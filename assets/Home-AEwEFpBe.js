const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/tasks-DYYyw5nR.js","assets/vendor-B-2yl_ca.js","assets/vendor-DpTtVfbh.css","assets/emoji-D7qZVVSC.js","assets/ui-lib-C41lPcrf.js","assets/settings-xmdSeWFy.js","assets/ntc-LB1IgDFN.js"])))=>i.map(i=>d[i]);
import{_ as z}from"./index-C1dco4g_.js";import{r as t,j as e,u as V}from"./vendor-B-2yl_ca.js";import{u as A,U as E,N as D,O as _,Q as $,R as L,V as N,W as F,X as B,Y as W,Z as U,_ as q,$ as I,a0 as K,a1 as Q}from"./settings-xmdSeWFy.js";import{a as M}from"./emoji-D7qZVVSC.js";import{u as G,H as X,a as Y}from"./tasks-DYYyw5nR.js";import{n as Z,by as J,a as R,a7 as ee,bz as te,C as se,f as ne,i as ae}from"./ui-lib-C41lPcrf.js";import"./ntc-LB1IgDFN.js";const oe=({children:r})=>{const[s,C]=t.useState(null),[p,h]=t.useState(null),[j,x]=t.useState(null),[g,a]=t.useState(new Set),[f,i]=G([],"selectedTasks","sessionStorage"),[n,o]=G("","search","sessionStorage"),[l,c]=t.useState(!1),[T,d]=t.useState(!1),S=A(),y=t.useCallback(u=>{a(k=>{const m=new Set(k);return m.has(u)?m.delete(u):m.add(u),m})},[]),w=t.useCallback(u=>{h(null),i(k=>k.includes(u)?k.filter(m=>m!==u):[...k,u])},[i]),b=t.useCallback(u=>n?u.split(new RegExp(`(${n})`,"gi")).map((m,O)=>m.toLowerCase()===n.toLowerCase()?e.jsx(X,{children:m},O):m):u,[n]),P=t.useCallback(()=>{s&&d(!0)},[s]),v=t.useCallback(()=>{h(null),document.body.style.overflow="visible",s&&!S&&g.has(s)&&y(s)},[s,S,g,y]),H=t.useMemo(()=>({selectedTaskId:s,setSelectedTaskId:C,anchorEl:p,setAnchorEl:h,anchorPosition:j,setAnchorPosition:x,expandedTasks:g,setExpandedTasks:a,toggleShowMore:y,search:n,setSearch:o,highlightMatchingText:b,multipleSelectedTasks:f,setMultipleSelectedTasks:i,handleSelectTask:w,editModalOpen:l,setEditModalOpen:c,handleDeleteTask:P,deleteDialogOpen:T,setDeleteDialogOpen:d,handleCloseMoreMenu:v}),[s,p,j,g,y,n,o,b,f,i,w,l,P,T,v]);return e.jsx(Y.Provider,{value:H,children:r})},re=t.memo(()=>{const[r,s]=t.useState(""),[C,p]=t.useState(0),{user:h}=t.useContext(E),{emojisStyle:j}=h,x=t.useRef(null),g=t.useRef(0),a=t.useRef([]),f=t.useCallback(i=>{const n=/\*\*(.*?)\*\*/g;return i.split(n).map((l,c)=>{if(c%2===1){const T=l.trim();return e.jsx(M,{size:20,unified:T,emojiStyle:j},c)}else return l})},[j]);return t.useEffect(()=>{const i=D();s(i),a.current=f(i);const n=6e3,o=l=>{if(l-g.current>=n){g.current=l;const c=D();s(c),a.current=f(c),p(T=>T+1)}x.current=requestAnimationFrame(o)};return x.current=requestAnimationFrame(o),()=>{x.current&&cancelAnimationFrame(x.current)}},[f]),e.jsx(ie,{className:"animated-greeting",children:typeof r=="string"?f(r):r},C)}),ie=Z.div`
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 16px;
  margin-top: 4px;
  margin-left: 8px;
  font-style: italic;
  will-change: transform, opacity;
  animation: ${_} 0.5s ease-in-out;
`,le=t.lazy(()=>z(()=>import("./tasks-DYYyw5nR.js").then(r=>r.c),__vite__mapDeps([0,1,2,3,4,5,6])).then(r=>({default:r.TasksList}))),he=()=>{const{user:r}=t.useContext(E),{tasks:s,emojisStyle:C,settings:p,name:h}=r,j=$(),x=V(),g=A(),a=t.useMemo(()=>{const n=s.filter(d=>d.done).length,o=s.length>0?n/s.length*100:0,l=new Date().setHours(0,0,0,0),c=s.filter(d=>d.deadline?new Date(d.deadline).setHours(0,0,0,0)===l&&!d.done:!1),T=c.map(d=>d.name);return{completedTasksCount:n,completedTaskPercentage:o,tasksWithDeadlineTodayCount:c.length,tasksDueTodayNames:T}},[s]),f=t.useMemo(()=>{const o=new Date().getHours();return console.log("Hora local:",o),o>=5&&o<12?"Bom dia":o>=12&&o<18?"Boa tarde":"Boa noite"},[]),i=t.useMemo(()=>{const n=a.completedTaskPercentage;switch(!0){case n===0:return"Nenhuma tarefa concluída ainda. Continue!";case n===100:return"Parabéns! Todas as tarefas concluídas!";case n>=75:return"Quase lá!";case n>=50:return"Você está no meio do caminho! Continue assim!";case n>=25:return"Você está fazendo um bom progresso.";default:return"Você está apenas começando."}},[a.completedTaskPercentage]);return t.useEffect(()=>{document.title="Todo App"},[]),e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsx(M,{unified:"1f44b",emojiStyle:C}),"   ",f,h&&e.jsxs("span",{translate:"no",children:[", ",e.jsx("span",{children:h})]})]}),e.jsx(re,{}),!j&&e.jsxs(N,{children:[e.jsx(J,{})," Você está offline, mas pode usar o aplicativo!"]}),s.length>0&&e.jsx(F,{children:e.jsxs(B,{glow:p.enableGlow,children:[e.jsxs(R,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(W,{variant:"determinate",value:a.completedTaskPercentage,size:64,thickness:5,"aria-label":"Progress",glow:p.enableGlow}),e.jsx(U,{glow:p.enableGlow&&a.completedTaskPercentage>0,children:e.jsx(ee,{variant:"caption",component:"div",color:"white",sx:{fontSize:"16px",fontWeight:600},children:`${Math.round(a.completedTaskPercentage)}%`})})]}),e.jsxs(q,{children:[e.jsx(I,{children:a.completedTasksCount===0?`Você tem ${s.length} tarefa${s.length>1?"s":""} para concluir.`:`Você concluiu ${a.completedTasksCount} de ${s.length} tarefas.`}),e.jsx(K,{children:i}),a.tasksWithDeadlineTodayCount>0&&e.jsxs("span",{style:{opacity:.8,display:"inline-block"},children:[e.jsx(te,{sx:{fontSize:"20px",verticalAlign:"middle"}})," Tarefas com vencimento hoje: ",e.jsx("span",{translate:"no",children:new Intl.ListFormat("en",{style:"long"}).format(a.tasksDueTodayNames)})]})]})]})}),e.jsx(t.Suspense,{fallback:e.jsx(R,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(se,{})}),children:e.jsx(oe,{children:e.jsx(le,{})})}),!g&&e.jsx(ne,{title:s.length>0?"Adicionar nova tarefa":"Adicionar tarefa",placement:"left",children:e.jsx(Q,{animate:s.length===0,glow:p.enableGlow,onClick:()=>x("add"),"aria-label":"Adicionar Tarefa",children:e.jsx(ae,{style:{fontSize:"44px"}})})})]})};export{he as default};
