const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/tasks-u5ZNZD5t.js","assets/vendor-CAPrwHoW.js","assets/vendor-DpTtVfbh.css","assets/emoji-DdLBlTIZ.js","assets/ui-lib-lpr_KMSR.js","assets/settings-BshogTHf.js","assets/ntc-LB1IgDFN.js"])))=>i.map(i=>d[i]);
import{_}from"./index-AZYLRJdZ.js";import{r as t,j as e,u as z}from"./vendor-CAPrwHoW.js";import{u as R,U as M,M as A,N,O as $,Q as L,R as Y,V as F,W as B,X as W,Y as K,Z as U,_ as V,$ as q,a0 as I}from"./settings-BshogTHf.js";import{a as E}from"./emoji-DdLBlTIZ.js";import{u as D,H as Q,a as X}from"./tasks-u5ZNZD5t.js";import{n as Z,by as J,a as G,a7 as ee,bz as te,C as se,f as ne,i as ae}from"./ui-lib-lpr_KMSR.js";import"./ntc-LB1IgDFN.js";const oe=({children:r})=>{const[s,y]=t.useState(null),[m,h]=t.useState(null),[T,x]=t.useState(null),[p,a]=t.useState(new Set),[g,l]=D([],"selectedTasks","sessionStorage"),[n,f]=D("","search","sessionStorage"),[o,i]=t.useState(!1),[k,c]=t.useState(!1),S=R(),C=t.useCallback(u=>{a(j=>{const d=new Set(j);return d.has(u)?d.delete(u):d.add(u),d})},[]),w=t.useCallback(u=>{h(null),l(j=>j.includes(u)?j.filter(d=>d!==u):[...j,u])},[l]),b=t.useCallback(u=>n?u.split(new RegExp(`(${n})`,"gi")).map((d,O)=>d.toLowerCase()===n.toLowerCase()?e.jsx(Q,{children:d},O):d):u,[n]),P=t.useCallback(()=>{s&&c(!0)},[s]),v=t.useCallback(()=>{h(null),document.body.style.overflow="visible",s&&!S&&p.has(s)&&C(s)},[s,S,p,C]),H=t.useMemo(()=>({selectedTaskId:s,setSelectedTaskId:y,anchorEl:m,setAnchorEl:h,anchorPosition:T,setAnchorPosition:x,expandedTasks:p,setExpandedTasks:a,toggleShowMore:C,search:n,setSearch:f,highlightMatchingText:b,multipleSelectedTasks:g,setMultipleSelectedTasks:l,handleSelectTask:w,editModalOpen:o,setEditModalOpen:i,handleDeleteTask:P,deleteDialogOpen:k,setDeleteDialogOpen:c,handleCloseMoreMenu:v}),[s,m,T,p,C,n,f,b,g,l,w,o,P,k,v]);return e.jsx(X.Provider,{value:H,children:r})},re=t.memo(()=>{const[r,s]=t.useState(""),[y,m]=t.useState(0),{user:h}=t.useContext(M),{emojisStyle:T}=h,x=t.useRef(null),p=t.useRef(0),a=t.useRef([]),g=t.useCallback(l=>{const n=/\*\*(.*?)\*\*/g;return l.split(n).map((o,i)=>{if(i%2===1){const k=o.trim();return e.jsx(E,{size:20,unified:k,emojiStyle:T},i)}else return o})},[T]);return t.useEffect(()=>{const l=A();s(l),a.current=g(l);const n=6e3,f=o=>{if(o-p.current>=n){p.current=o;const i=A();s(i),a.current=g(i),m(k=>k+1)}x.current=requestAnimationFrame(f)};return x.current=requestAnimationFrame(f),()=>{x.current&&cancelAnimationFrame(x.current)}},[g]),e.jsx(le,{className:"animated-greeting",children:typeof r=="string"?g(r):r},y)}),le=Z.div`
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 16px;
  margin-top: 4px;
  margin-left: 8px;
  font-style: italic;
  will-change: transform, opacity;
  animation: ${N} 0.5s ease-in-out;
`,ie=t.lazy(()=>_(()=>import("./tasks-u5ZNZD5t.js").then(r=>r.c),__vite__mapDeps([0,1,2,3,4,5,6])).then(r=>({default:r.TasksList}))),he=()=>{const{user:r}=t.useContext(M),{tasks:s,emojisStyle:y,settings:m,name:h}=r,T=$(),x=z(),p=R(),a=t.useMemo(()=>{const n=s.filter(c=>c.done).length,f=s.length>0?n/s.length*100:0,o=new Date().setHours(0,0,0,0),i=s.filter(c=>c.deadline?new Date(c.deadline).setHours(0,0,0,0)===o&&!c.done:!1),k=i.map(c=>c.name);return{completedTasksCount:n,completedTaskPercentage:f,tasksWithDeadlineTodayCount:i.length,tasksDueTodayNames:k}},[s]),g=t.useMemo(()=>{const o=(new Date().getUTCHours()-3+24)%24;return o>=5&&o<12?"Bom dia":o>=12&&o<18?"Boa tarde":"Boa noite"},[]),l=t.useMemo(()=>{const n=a.completedTaskPercentage;switch(!0){case n===0:return"No tasks completed yet. Keep going!";case n===100:return"Congratulations! All tasks completed!";case n>=75:return"Almost there!";case n>=50:return"You're halfway there! Keep it up!";case n>=25:return"You're making good progress.";default:return"You're just getting started."}},[a.completedTaskPercentage]);return t.useEffect(()=>{document.title="Todo App"},[]),e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsx(E,{unified:"1f44b",emojiStyle:y}),"   ",g,h&&e.jsxs("span",{translate:"no",children:[", ",e.jsx("span",{children:h})]})]}),e.jsx(re,{}),!T&&e.jsxs(Y,{children:[e.jsx(J,{})," You're offline but you can use the app!"]}),s.length>0&&e.jsx(F,{children:e.jsxs(B,{glow:m.enableGlow,children:[e.jsxs(G,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(W,{variant:"determinate",value:a.completedTaskPercentage,size:64,thickness:5,"aria-label":"Progress",glow:m.enableGlow}),e.jsx(K,{glow:m.enableGlow&&a.completedTaskPercentage>0,children:e.jsx(ee,{variant:"caption",component:"div",color:"white",sx:{fontSize:"16px",fontWeight:600},children:`${Math.round(a.completedTaskPercentage)}%`})})]}),e.jsxs(U,{children:[e.jsx(V,{children:a.completedTasksCount===0?`You have ${s.length} task${s.length>1?"s":""} to complete.`:`You've completed ${a.completedTasksCount} out of ${s.length} tasks.`}),e.jsx(q,{children:l}),a.tasksWithDeadlineTodayCount>0&&e.jsxs("span",{style:{opacity:.8,display:"inline-block"},children:[e.jsx(te,{sx:{fontSize:"20px",verticalAlign:"middle"}})," Tasks due today: ",e.jsx("span",{translate:"no",children:new Intl.ListFormat("en",{style:"long"}).format(a.tasksDueTodayNames)})]})]})]})}),e.jsx(t.Suspense,{fallback:e.jsx(G,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(se,{})}),children:e.jsx(oe,{children:e.jsx(ie,{})})}),!p&&e.jsx(ne,{title:s.length>0?"Add New Task":"Add Task",placement:"left",children:e.jsx(I,{animate:s.length===0,glow:m.enableGlow,onClick:()=>x("add"),"aria-label":"Add Task",children:e.jsx(ae,{style:{fontSize:"44px"}})})})]})};export{he as default};
