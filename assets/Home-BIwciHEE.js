const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/tasks-DsKayl2e.js","assets/vendor-B8wZl_f4.js","assets/vendor-DpTtVfbh.css","assets/emoji-BdBGO0jD.js","assets/ui-lib-CzYSArXp.js","assets/settings-CxFNKuU0.js","assets/ntc-LB1IgDFN.js"])))=>i.map(i=>d[i]);
import{_}from"./index-DGYzMODh.js";import{r as t,j as e,u as z}from"./vendor-B8wZl_f4.js";import{u as R,U as M,M as P,N,O as $,Q as L,R as Y,V as F,W,X as K,Y as U,Z as V,_ as q,$ as B,a0 as I}from"./settings-CxFNKuU0.js";import{a as E}from"./emoji-BdBGO0jD.js";import{u as A,H as Q,a as X}from"./tasks-DsKayl2e.js";import{n as Z,by as J,a as D,a7 as ee,bz as te,C as se,f as ne,i as ae}from"./ui-lib-CzYSArXp.js";import"./ntc-LB1IgDFN.js";const oe=({children:o})=>{const[n,y]=t.useState(null),[m,f]=t.useState(null),[T,h]=t.useState(null),[g,a]=t.useState(new Set),[p,r]=A([],"selectedTasks","sessionStorage"),[s,x]=A("","search","sessionStorage"),[l,i]=t.useState(!1),[k,c]=t.useState(!1),S=R(),C=t.useCallback(u=>{a(j=>{const d=new Set(j);return d.has(u)?d.delete(u):d.add(u),d})},[]),w=t.useCallback(u=>{f(null),r(j=>j.includes(u)?j.filter(d=>d!==u):[...j,u])},[r]),b=t.useCallback(u=>s?u.split(new RegExp(`(${s})`,"gi")).map((d,H)=>d.toLowerCase()===s.toLowerCase()?e.jsx(Q,{children:d},H):d):u,[s]),G=t.useCallback(()=>{n&&c(!0)},[n]),v=t.useCallback(()=>{f(null),document.body.style.overflow="visible",n&&!S&&g.has(n)&&C(n)},[n,S,g,C]),O=t.useMemo(()=>({selectedTaskId:n,setSelectedTaskId:y,anchorEl:m,setAnchorEl:f,anchorPosition:T,setAnchorPosition:h,expandedTasks:g,setExpandedTasks:a,toggleShowMore:C,search:s,setSearch:x,highlightMatchingText:b,multipleSelectedTasks:p,setMultipleSelectedTasks:r,handleSelectTask:w,editModalOpen:l,setEditModalOpen:i,handleDeleteTask:G,deleteDialogOpen:k,setDeleteDialogOpen:c,handleCloseMoreMenu:v}),[n,m,T,g,C,s,x,b,p,r,w,l,G,k,v]);return e.jsx(X.Provider,{value:O,children:o})},re=t.memo(()=>{const[o,n]=t.useState(""),[y,m]=t.useState(0),{user:f}=t.useContext(M),{emojisStyle:T}=f,h=t.useRef(null),g=t.useRef(0),a=t.useRef([]),p=t.useCallback(r=>{const s=/\*\*(.*?)\*\*/g;return r.split(s).map((l,i)=>{if(i%2===1){const k=l.trim();return e.jsx(E,{size:20,unified:k,emojiStyle:T},i)}else return l})},[T]);return t.useEffect(()=>{const r=P();n(r),a.current=p(r);const s=6e3,x=l=>{if(l-g.current>=s){g.current=l;const i=P();n(i),a.current=p(i),m(k=>k+1)}h.current=requestAnimationFrame(x)};return h.current=requestAnimationFrame(x),()=>{h.current&&cancelAnimationFrame(h.current)}},[p]),e.jsx(le,{className:"animated-greeting",children:typeof o=="string"?p(o):o},y)}),le=Z.div`
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 16px;
  margin-top: 4px;
  margin-left: 8px;
  font-style: italic;
  will-change: transform, opacity;
  animation: ${N} 0.5s ease-in-out;
`,ie=t.lazy(()=>_(()=>import("./tasks-DsKayl2e.js").then(o=>o.c),__vite__mapDeps([0,1,2,3,4,5,6])).then(o=>({default:o.TasksList}))),he=()=>{const{user:o}=t.useContext(M),{tasks:n,emojisStyle:y,settings:m,name:f}=o,T=$(),h=z(),g=R(),a=t.useMemo(()=>{const s=n.filter(c=>c.done).length,x=n.length>0?s/n.length*100:0,l=new Date().setHours(0,0,0,0),i=n.filter(c=>c.deadline?new Date(c.deadline).setHours(0,0,0,0)===l&&!c.done:!1),k=i.map(c=>c.name);return{completedTasksCount:s,completedTaskPercentage:x,tasksWithDeadlineTodayCount:i.length,tasksDueTodayNames:k}},[n]),p=t.useMemo(()=>{const s=new Date().getHours();return s<12&&s>=5?"Good morning":s<18&&s>12?"Good afternoon":"Good evening"},[]),r=t.useMemo(()=>{const s=a.completedTaskPercentage;switch(!0){case s===0:return"No tasks completed yet. Keep going!";case s===100:return"Congratulations! All tasks completed!";case s>=75:return"Almost there!";case s>=50:return"You're halfway there! Keep it up!";case s>=25:return"You're making good progress.";default:return"You're just getting started."}},[a.completedTaskPercentage]);return t.useEffect(()=>{document.title="Todo App"},[]),e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsx(E,{unified:"1f44b",emojiStyle:y}),"   ",p,f&&e.jsxs("span",{translate:"no",children:[", ",e.jsx("span",{children:f})]})]}),e.jsx(re,{}),!T&&e.jsxs(Y,{children:[e.jsx(J,{})," You're offline but you can use the app!"]}),n.length>0&&e.jsx(F,{children:e.jsxs(W,{glow:m.enableGlow,children:[e.jsxs(D,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(K,{variant:"determinate",value:a.completedTaskPercentage,size:64,thickness:5,"aria-label":"Progress",glow:m.enableGlow}),e.jsx(U,{glow:m.enableGlow&&a.completedTaskPercentage>0,children:e.jsx(ee,{variant:"caption",component:"div",color:"white",sx:{fontSize:"16px",fontWeight:600},children:`${Math.round(a.completedTaskPercentage)}%`})})]}),e.jsxs(V,{children:[e.jsx(q,{children:a.completedTasksCount===0?`You have ${n.length} task${n.length>1?"s":""} to complete.`:`You've completed ${a.completedTasksCount} out of ${n.length} tasks.`}),e.jsx(B,{children:r}),a.tasksWithDeadlineTodayCount>0&&e.jsxs("span",{style:{opacity:.8,display:"inline-block"},children:[e.jsx(te,{sx:{fontSize:"20px",verticalAlign:"middle"}})," Tasks due today: ",e.jsx("span",{translate:"no",children:new Intl.ListFormat("en",{style:"long"}).format(a.tasksDueTodayNames)})]})]})]})}),e.jsx(t.Suspense,{fallback:e.jsx(D,{display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(se,{})}),children:e.jsx(oe,{children:e.jsx(ie,{})})}),!g&&e.jsx(ne,{title:n.length>0?"Add New Task":"Add Task",placement:"left",children:e.jsx(I,{animate:n.length===0,glow:m.enableGlow,onClick:()=>h("add"),"aria-label":"Add Task",children:e.jsx(ae,{style:{fontSize:"44px"}})})})]})};export{he as default};
